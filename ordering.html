<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="picture/favicon.png" type="image/png">
  <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="about.css">
  <link rel="stylesheet" href="ordering.css">
  <title>Wontinola</title>
</head>
<body>
  <header>
    <img src="picture/log.png" alt="Logo" class="logo" />
    <div class="nav-buttons">
      <button onclick="window.location.href='index.html'" >Home</button>
      <button onclick="window.location.href='about.html'">About</button>
      <button onclick="window.location.href='flavors.html'">Flavors</button>
    </div>
    <div class="burger" onclick="toggleMenu()">☰</div>
  </header>

  <div id="overlay" class="overlay" onclick="toggleMenu()"></div>

  <div id="sidePanel" class="side-panel">
    <button onclick="window.location.href='index.html'" >Home</button>
    <button onclick="window.location.href='about.html'">About</button>
    <button onclick="window.location.href='flavors.html'">Flavors</button>
  </div>
 
  <div class="whole-div" > 
    
    <div class="cp-div" id="cp-div">
      <h2 >Order</h2>
      <h6>Choose Product:</h6>
      <div class="button-orders">
        <button class="image-button" style="background-image: url('picture/regular.png');" onclick="addRow('Regular', 60)"></button>
        <button class="image-button" style="background-image: url('picture/spicy.png');"  onclick="addRow('Spicy', 70)"></button>
      </div>
    <h6>Recommended for you:</h6>
    <div class="button-orders">
      <button class="addons-buttons" onclick="addRow('Dumplings x3', 25)">Dumplings<br>3pcs ₱25.00</button>
      <button class="addons-buttons" onclick="addRow('Chili', 5)">Chili<br>₱5.00</button>
      <button class="addons-buttons" onclick="addRow('Fried Garlic', 5)">Fried Garlic<br>₱5.00</button>
    </div>
    </div>


    <div  class="form-div" id="gcash">
      <div class="form-div-1">
        <button class="form-div-back" onclick="backDiv()">Back</button>
       <h2>Check Out</h2>
     </div>
      <label for="username">Phone Number: </label>
      <input type="number" id="phone-number" name="username" maxlength="11" placeholder="09*********">
      <label for="password">Password: </label>
      <input type="password" id="password" name="password" maxlength="4">
    </div>

    <div  class="form-div" id="pincode">
      <div class="form-div-1">
        <button class="form-div-back" onclick="backDiv()">Back</button>
       <h2>Check Out</h2>
     </div>
      <label for="pin-number">Pin Number: </label>
      <input type="number" id="pinnumber" name="pin-number" maxlength="4" >
    
    </div>

    <div class="form-div" id="form-div">
      <div class="form-div-1">
         <button class="form-div-back" onclick="backDiv()">Back</button>
        <h2>Check Out</h2>
      </div>
     <label for="username">Name:</label>
      <input type="text" id="username" name="username">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email">
      <label for="contactNum">Contact Number:</label>
      <input type="number" id="contactNum" name="contactNum">
      <label for="address">Address:</label>
      <input type="text" id="address" name="address">
      <label for="options">Mode of Payment:</label>
      <select name="options" id="select-1">
        <option value="option1">Cash on Delivery</option>
        <option value="option2">E-Wallet (G-Cash, PayMaya)</option>
        <option value="option3">Credit Card</option>
      </select>
    </div>

   <div class="receipt-1">
      <h6>ORDER DETAILS</h6>
    
    <table>
      <thead>
        <tr>
           <th>
            Quantity
           </th>
           <th>
            Product Name
           </th>
        </tr>
      </thead>
      <tbody>
       
      </tbody>
    </table>
    <p id="subTotal">Subtotal: </p>
    <p>Delivery Change: ₱25.00 </p>
    <p id="total">Total: </p>
    <div class="checkout-btn">
      <button onclick="toggleDisplay()">Check Out</button>
    </div>
  </div>
  </div>
  <footer>
    <div class="footer-1">
      <p >For more information, kindly contact us through:</p>
    </div>
    <div class="button-grid">
      <button class="logo-button-column" onclick="copyNumber('09056053442')">
        <img src="picture/phone.png" alt="Logo">
        <span>Phone Number</span>
      </button>
      <button class="logo-button-column" onclick="window.location.href='https\://www.instagram.com/wontinola.official'">
        <img src="picture/ig.png" alt="Logo">
        <span>Instagram</span>
      </button>
      <button class="logo-button-column" onclick="window.location.href='https\://www.facebook.com/share/1EdebhKNjS'">
        <img src="picture/fb.png" alt="Logo">
        <span>Facebook</span>
      </button>
      <button class="logo-button-column" onclick="copyNumber('connectwithwontinola@gmail.com')">
        <img src="picture/email.png" alt="Logo">
        <span>Email</span>
      </button>
    </div>
  </footer>

 <script>
  var isFine = false;

  function copyNumber(ss) {
      navigator.clipboard.writeText(ss).then(function() {
        alert('Text copied: ' + ss);
      }, function(err) {
        console.error('Could not copy text: ', err);
      });
    }
  
  var subtot = 0;
  var deliveryCharge = 25;
  
  function addRow(name, num) {
    const table = document.querySelector('table tbody');
    const rows = table.querySelectorAll('tr');

    for (let row of rows) {
      const productName = row.children[1].textContent;
      if (productName === name) {
        const quantityCell = row.children[0];
        quantityCell.textContent = parseInt(quantityCell.textContent) + 1;
        subtot += num;
        updateTotals();
        return;
      }
    }

    const row = document.createElement('tr');
    row.innerHTML = `
      <td>1</td>
      <td>${name}</td>
      <td><button onclick="increment(this, ${num})">+</button></td>
      <td><button onclick="decrement(this, ${num})">-</button></td>
    `;
    table.appendChild(row);
    subtot += num;
    updateTotals();
  }

  function updateTotals() {
    const subTota = document.getElementById('subTotal');
    const tota = document.getElementById('total');
    subTota.innerHTML = "Subtotal: ₱" + subtot;
    tota.innerHTML = "Total: ₱" + (subtot + deliveryCharge);
    isFine = subtot!=0;
    if(!isFine){
      document.getElementById('cp-div').style.display = '';
      document.getElementById('form-div').style.display = 'none';
      document.getElementById('gcash').style.display = 'none';
      document.getElementById('pincode').style.display = 'none';
      isAlreadyOpen = false
      isAlreadyOpen1 = false;
      isAlreadyOpen2 = false;
    }

  }

  function increment(btn, price) {
    const td = btn.closest('tr').querySelector('td');
    td.textContent = parseInt(td.textContent) + 1;
    subtot += price;
    updateTotals();
  }

  function decrement(btn, price) {
    const td = btn.closest('tr').querySelector('td');
    let value = parseInt(td.textContent);
    if (value > 1) {
      td.textContent = value - 1;
      subtot -= price;
    } else {
      subtot -= price;
      btn.closest('tr').remove();
    }
    updateTotals();
    }
  
  const formDiv = document.getElementById('form-div');
  const gcashDiv = document.getElementById('gcash');
  const pinDiv = document.getElementById('pincode');

  function backDiv(){
    if(pinDiv.style.display == 'flex'){
      gcashDiv.style.display = 'flex';
      pinDiv.style.display = 'none';
      isAlreadyOpen2 = false;
      return;
    }else if(gcashDiv.style.display == 'flex'){
      formDiv.style.display = 'flex';
      gcashDiv.style.display = 'none'; 
      isAlreadyOpen1 = false;
      return;
    }else if(formDiv.style.display == 'flex'){
      document.getElementById('cp-div').style.display = '';
      formDiv.style.display = 'none';
      isAlreadyOpen = false;
      return;
    }
  }

  var isAlreadyOpen = false;
  var isAlreadyOpen1 = false;
  var isAlreadyOpen2 = false;

  function toggleDisplay() {
    if (!isFine) {
      alert("Please order first!");
      return;
    }

 
    
    if (formDiv.style.display === 'flex' || isAlreadyOpen) {
      
      const name = document.getElementById('username').value.trim();
      const email = document.getElementById('email').value.trim();
      const contactNum = document.getElementById('contactNum').value.trim();
      const address = document.getElementById('address').value.trim();
      const modeofpayment = document.getElementById('select-1').value.trim();

      if (!name || !email || !contactNum || !address) {
        alert("Please fill out all the fields!");
        return;
      } 
      else if(modeofpayment == "option2"){
        if(gcashDiv.style.display == 'flex' || isAlreadyOpen1){
          const phoneNum = document.getElementById('phone-number').value.trim();
          const password = document.getElementById('password').value.trim();
          isAlreadyOpen1 = true;
          if(!phoneNum || !password){
            alert("Please fill out all the fields!");
            return;
          }else if(password == "1234"){
            if (pinDiv.style.display === 'flex' || isAlreadyOpen2) {
              const pinnumber = document.getElementById('pinnumber').value.trim();
              if(pinnumber == "1234"){
                alert("Thank you for ordering, " + name);
                window.location.href = 'index.html';
              }else{
                alert("Wrong Pin Number!");
                return;
              }
            }
            isAlreadyOpen2 = true;
            gcashDiv.style.display = 'none';
            pinDiv.style.display = 'flex';
            return;
          }else{
            alert("Wrong Password!");
            return;
          }             

        } 
        formDiv.style.display = 'none';
            gcashDiv.style.display = 'flex'; 
           return;
      }else {
          alert("Thank you for ordering, " + name);
          window.location.href = 'index.html';
        }
    } 
 
    isAlreadyOpen = true;
    document.getElementById('cp-div').style.display = 'none';
    formDiv.style.display = 'flex';
  }

  function toggleMenu() {
      const panel = document.getElementById("sidePanel");
      const overlay = document.getElementById("overlay");
      panel.classList.toggle("open");
      overlay.classList.toggle("show");
      document.body.style.overflow = panel.classList.contains("open") ? "hidden" : "";
  }
</script>
</body>
</html>
